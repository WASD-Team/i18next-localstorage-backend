!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.i18nextLocalStorageBackend=n()}(this,function(){"use strict";function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.prefix;return""+(void 0===i?"":i)+t+"-"+n}function e(t,n){try{u.setItem(t,n)}catch(t){}}function i(t,n){try{return u.getItem(t,n)}catch(t){return}}var r=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},o=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),a=global,s=a.window,u=s.localStorage,l=function(){function a(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(this,a),this.init(n,r({prefix:"i18next_res_",expirationTime:6048e5,versions:{}},e)),this.type="backend"}return o(a,[{key:"init",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.options=n,this.services=t;var e=!0,i=!1,r=void 0;try{for(var o,a=n[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var s=o.value;void 0===this.options[s]&&(this.options[s]=n[s])}}catch(t){i=!0,r=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw r}}}},{key:"get",value:function(t,e){try{return JSON.parse(i(n(t,e,this.options)))}catch(t){return}}},{key:"read",value:function(t,n,e){var i=this,r=this.get(t,n);if(!r)return e(null,null);var o=(new Date).getTime();if(!r.i18nStamp)return e(null,null);if(r.i18nStamp+this.options.expirationTime<o)return e(null,null);var a=this.options.versions[t];return a instanceof Promise?a.then(function(e){data.i18nVersion=e,i.set(t,n,data)}):a!==r.i18nVersion?e(null,null):(delete r.i18nVersion,delete r.i18nStamp,e(null,r))}},{key:"set",value:function(t,i,r){e(n(t,i,this.options),JSON.stringify(r))}},{key:"save",value:function(t,n,e){var i=this;try{e.i18nStamp=(new Date).getTime();var r=this.options.versions[t];if(r instanceof Promise)return r.then(function(r){e.i18nVersion=r,i.set(t,n,e)});if(!r)return this.set(t,n,e);e.i18nVersion=r,this.set(t,n,e)}catch(t){}}}]),a}();return l.type="backend",l});
